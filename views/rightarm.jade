extends layout

block content
    h3.page-title=title
    <!-- ko foreach: { data: franchises() } -->
    a(href="#").list-group-item
        .row
            .col-1
                img(data-bind="attr: { src: logo }").img-rounded.img-responsive
            .col-
                h4(data-bind="text: name").list-group-item-heading
        .row
            .col-2
                span division:&nbsp;
                span(data-bind="text: division").list-group-item-text
    <!-- /ko -->
block footercrumbs
    ul.breadcrumb
        li 
            a(href='/') Menu
        li.active RightArm

block scripts
    script(type='text/javascript').
        var franchise = function() {
            var self = this
            self.name = ko.observable()
            self.logo = ko.observable()
            self.division = ko.observable()
        }
        var Page = function() {
            var url = "http://football32.myfantasyleague.com/2013/export?TYPE=league&L=28655&W=&JSON=1";
            var self = this;
            self.franchises = ko.observable([])
            $.ajax({
                url: url,
                success: function (data) {
                    var pulled = data.league.franchises.franchise
                    var tmp = [];
                    for (var i = 0; i < pulled.length; i++){
                        var f = new franchise()
                        f.name(pulled[i].name)
                        f.logo(pulled[i].logo)
                        f.division(pulled[i].division)
                        tmp.push(f)
                    }
                    self.franchises(tmp)
                }
            });

            self.textme = ko.observable("textme")
        }
        $(document).ready(function(){
            var model = new Page();
            ko.applyBindings(model);
        })